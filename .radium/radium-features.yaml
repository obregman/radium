# Radium Features Configuration
# This file defines high-level features and their relationships to components
# Use this to visualize your product roadmap and feature dependencies

spec:
  features:
    - code-visualization:
        name: Code Visualization
        description: Interactive graph showing codebase structure and relationships with D3.js-based visualization
        area: Visualization
        components:
          - views
          - store
          - indexer
        dependencies: []
        flow:
          - type: user
            name: Open Component View
            description: User runs "Radium: Component View" command
            impl: src/extension.ts
          - type: system
            name: Index workspace
            description: Parse and index all source files in the workspace
            impl: src/indexer/indexer.ts
          - type: system
            name: Build graph
            description: Create hierarchical or component-based graph structure
            impl: src/views/map-panel.ts
          - type: window
            name: Display interactive graph
            description: Render D3.js visualization with pan/zoom capabilities
            impl: src/views/map-panel.ts

    - component-based-view:
        name: Component-Based Architecture View
        description: Organize files by logical components defined in radium-components.yaml instead of directory structure
        area: Visualization
        components:
          - config
          - views
        dependencies:
          - code-visualization
        flow:
          - type: user
            name: Create radium-components.yaml
            description: User defines logical components in .radium/radium-components.yaml
          - type: system
            name: Load configuration
            description: Parse YAML configuration and map files to components
            impl: src/config/radium-config.ts
          - type: window
            name: Display component view
            description: Show files grouped by logical components instead of directories
            impl: src/views/map-panel.ts

    - realtime-file-tracking:
        name: Real-time File Change Tracking
        description: Monitor workspace for file modifications and display visual diffs in real-time
        area: Change Tracking
        components:
          - views
          - config
        dependencies:
          - code-visualization
        flow:
          - type: user
            name: Open Real-time Changes
            description: User runs "Radium: Real-time File Changes" command
            impl: src/extension.ts
          - type: system
            name: Start file watcher
            description: Initialize Chokidar watcher for source files
            impl: src/views/realtime-changes-panel.ts
          - type: system
            name: Detect file change
            description: File modification triggers change event with debouncing
            impl: src/views/realtime-changes-panel.ts
          - type: system
            name: Generate diff
            description: Compare file content and generate git-style diff
            impl: src/views/realtime-changes-panel.ts
          - type: window
            name: Display visual diff
            description: Show file boxes with syntax-highlighted diffs and connection lines
            impl: src/views/realtime-changes-panel.ts

    - symbol-level-tracking:
        name: Symbol-Level Change Visualization
        description: Track and visualize code changes at the symbol level (functions, classes, interfaces) with call relationships
        area: Change Tracking
        components:
          - views
          - indexer
          - config
        dependencies:
          - realtime-file-tracking
        flow:
          - type: user
            name: Open Symbol Changes
            description: User runs "Radium: Real-time Symbol Visualization" command
            impl: src/extension.ts
          - type: system
            name: Parse file symbols
            description: Extract symbols using Tree-sitter parser
            impl: src/indexer/parser.ts
          - type: system
            name: Analyze symbol changes
            description: Compare symbols and identify added/modified/deleted items
            impl: src/views/symbol-changes-panel.ts
          - type: system
            name: Extract call relationships
            description: Identify function calls between symbols
            impl: src/views/symbol-changes-panel.ts
          - type: window
            name: Display symbol graph
            description: Render symbols as boxes with animated change indicators and call arrows
            impl: src/views/symbol-changes-panel.ts

    - git-integration:
        name: Git Integration
        description: Visualize uncommitted git changes at the symbol level
        area: Change Tracking
        components:
          - git
          - views
          - indexer
        dependencies:
          - symbol-level-tracking
        flow:
          - type: user
            name: Open Git Changes
            description: User runs "Radium: Non-committed Git Changes" command
            impl: src/extension.ts
          - type: system
            name: Get git diff
            description: Execute git diff to compare working directory with HEAD
            impl: src/git/git-diff-tracker.ts
          - type: system
            name: Parse changed files
            description: Extract symbols from files with uncommitted changes
            impl: src/views/symbol-changes-panel.ts
          - type: window
            name: Display git changes
            description: Show symbol-level visualization of all uncommitted changes
            impl: src/views/symbol-changes-panel.ts

    - features-roadmap:
        name: Features Roadmap Visualization
        description: Visualize product features, their flows, and component dependencies from radium-features.yaml
        area: Visualization
        components:
          - config
          - views
        dependencies:
          - component-based-view
        flow:
          - type: user
            name: Create radium-features.yaml
            description: User defines features with flows and dependencies
          - type: user
            name: Open Features Map
            description: User runs "Radium: Features Map" command
            impl: src/extension.ts
          - type: system
            name: Load features config
            description: Parse radium-features.yaml and radium-components.yaml
            impl: src/config/features-config.ts
          - type: window
            name: Display features graph
            description: Show interactive graph with features, flows, and component relationships
            impl: src/views/features-map-panel.ts
          - type: user
            name: Explore features
            description: User clicks on features to see details, flows, and dependencies

    - ignore-patterns:
        name: File Ignore Patterns
        description: Filter files from visualization and tracking using radiumignore configuration
        area: Configuration
        components:
          - config
        dependencies: []
        flow:
          - type: user
            name: Create radiumignore
            description: User creates .radium/radiumignore file with patterns
          - type: system
            name: Load ignore rules
            description: Parse ignore patterns and compile glob matchers
            impl: src/config/radium-ignore.ts
          - type: system
            name: Filter files
            description: Apply ignore rules to file watching and visualization
            impl: src/views/realtime-changes-panel.ts

    - multi-language-support:
        name: Multi-Language Support
        description: Parse and analyze TypeScript, JavaScript, Python, C#, and TSX files
        area: Code Analysis
        components:
          - indexer
        dependencies:
          - code-visualization
        flow:
          - type: system
            name: Detect file language
            description: Identify language based on file extension
            impl: src/indexer/parser.ts
          - type: system
            name: Select parser
            description: Choose appropriate Tree-sitter parser for the language
            impl: src/indexer/parser.ts
          - type: system
            name: Extract symbols
            description: Parse file and extract language-specific symbols
            impl: src/indexer/parser.ts

    - impact-analysis:
        name: Impact Analysis
        description: Analyze the impact of code changes across the codebase to identify affected components
        area: Code Analysis
        components:
          - analysis
          - store
        dependencies:
          - code-visualization
          - symbol-level-tracking

    - multi-root-workspace:
        name: Multi-Root Workspace Support
        description: Support VS Code multi-root workspaces with automatic .radium directory detection
        area: Configuration
        components:
          - config
        dependencies: []

    - test-integration:
        name: Test Integration
        description: Automatically run impacted tests after changes
        area: Testing
        components:
          - analysis
        dependencies:
          - impact-analysis

